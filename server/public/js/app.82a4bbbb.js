(function(t){function e(e){for(var a,i,o=e[0],c=e[1],l=e[2],f=0,p=[];f<o.length;f++)i=o[f],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},s={app:0},r=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"093a":function(t,e,n){"use strict";var a=n("8c08"),s=n.n(a);s.a},1:function(t,e){},2221:function(t,e,n){"use strict";var a=n("7b46"),s=n.n(a);s.a},"2f3f":function(t,e,n){"use strict";var a=n("3ef6"),s=n.n(a);s.a},"3ef6":function(t,e,n){},"55fe":function(t,e,n){"use strict";var a=n("bda9"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],i=(n("33e9"),{}),o=i,c=(n("5c0b"),n("2877")),l=Object(c["a"])(o,s,r,!1,null,null,null),u=l.exports,f=n("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg"},[n("h1",[t._v("도트 마인드")]),n("router-link",{attrs:{to:{name:"game"}}},[n("button",{staticClass:"nes-btn is-primary",attrs:{type:"button"}},[t._v(" 혼자 그림 그리기 ")])]),n("router-link",{attrs:{to:{name:"multiGame"}}},[n("button",{staticClass:"nes-btn is-success",attrs:{type:"button"}},[t._v(" 같이 그림 그리기 ")])])],1)},m=[],d={},v=d,h=(n("eb3c"),Object(c["a"])(v,p,m,!1,null,"067c8185",null)),g=h.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("LoginForm")],1)},b=[],C=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"nes-field"},[n("label",{attrs:{for:"name_field"}},[t._v("Your name")]),n("input",{staticClass:"nes-input",attrs:{id:"name_field",type:"text"}})])])}],y={},x=y,D=Object(c["a"])(x,C,w,!1,null,"62afefe0",null),P=D.exports,O={components:{LoginForm:P}},k=O,j=Object(c["a"])(k,_,b,!1,null,"001443f4",null),$=j.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-container"},[n("header",[n("Nav")],1),n("div",{staticClass:"contents-container"},[n("Canvas",{staticClass:"canvas-container"})],1)])},E=[],I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",[n("router-link",{attrs:{to:"/"}},[t._v(" 도트 마인드 ")])],1)},F=[],T={},S=T,N=(n("55fe"),Object(c["a"])(S,I,F,!1,null,"4a925846",null)),B=N.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"canvas"},[n("div",{ref:"canvasImage",staticClass:"canvas__wrapper"},t._l(t.pixelData,(function(e,a){return n("div",{key:"column"+a,staticClass:"canvas__wrapper__column"},t._l(e,(function(e,a){return n("span",{key:"row"+a,staticClass:"canvas__wrapper__row",style:{backgroundColor:e.bgColor},attrs:{id:e.id},on:{mousedown:function(e){return e.preventDefault(),t.startDrawing(e)},mousemove:function(e){return e.preventDefault(),t.keepDrawing(e)},mouseup:function(e){return e.preventDefault(),t.endDrawing(e)}}})})),0)})),0),n("Pallete",{on:{"update-color":t.changeColor}}),n("div",{staticClass:"canvas__utils"},[n("button",{staticClass:"nes-btn is-error canvas__utils__clear",on:{click:t.clearPaint}},[t._v(" 모두 지우기 ")]),n("button",{staticClass:"nes-btn canvas__utils__download",on:{click:t.downloadImg}},[t._v(" 그림 다운로드 ")])])],1)},U=[],H=(n("99af"),n("d81d"),n("13d5"),n("ac1f"),n("1276"),n("96cf"),n("1da1")),A=n("8055"),G=n.n(A),J=n("70b0"),L=n.n(J),R=n("aeb1"),Y=n.n(R),q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pallete"},[t._l(t.color,(function(e,a){return n("div",{key:a,staticClass:"pallete-wrapper"},[n("button",{staticClass:"nes-btn pallete-wrapper__paint",style:{backgroundColor:e},on:{click:function(n){return n.preventDefault(),t.emitColor(e)}}})])})),n("button",{staticClass:"nes-btn pallete-wrapper__eraser",on:{click:function(e){return e.preventDefault(),t.emitColor("")}}},[t._v(" 지우개 ")])],2)},z=[],Q={data:function(){return{color:["#ffffff","#000000","#fe0000","#fd7500","#FEF400","#02fe00","#0595FF","#D201FD"],currentColor:""}},methods:{emitColor:function(t){this.currentColor=t,this.$emit("update-color",this.currentColor)}}},V=Q,W=(n("aed9"),Object(c["a"])(V,q,z,!1,null,"4e641686",null)),X=W.exports,Z=G()("http://localhost:4000/multi-game"),tt={components:{Pallete:X},props:{multiMode:{type:Boolean,default:!1}},data:function(){return{framePixel:16,pixelData:[],isDrawing:!1,currentColor:"black"}},created:function(){this.initPixelData(),this.setPixelData()},mounted:function(){this.receivePaint()},methods:{initPixelData:function(){var t=Array.apply(null,Array(this.framePixel));this.pixelData=t.map((function(e){return e=t,e}))},setPixelData:function(){this.pixelData=this.pixelData.map((function(t,e){return t.reduce((function(t,n,a){return t.push({id:"".concat(e,"+").concat(a),bgColor:""}),t}),[])}))},paintPixel:function(t){var e=t.toElement.id.split("+"),n=e[0],a=e[1];this.pixelData[n][a].bgColor=this.currentColor,this.multiMode&&this.sendPaint({columnKey:n,rowKey:a,color:this.currentColor})},sendPaint:function(t){Z.emit("paintInfo",t)},receivePaint:function(){var t=this;Z.on("receivePaintInfo",(function(e){t.pixelData[e.columnKey][e.rowKey].bgColor=e.color}))},startDrawing:function(t){this.isDrawing=!0,this.paintPixel(t)},keepDrawing:function(t){this.isDrawing&&this.paintPixel(t)},endDrawing:function(){this.isDrawing=!1},changeColor:function(t){this.currentColor=t},downloadImg:function(){var t=this;return Object(H["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$refs.canvasImage,e.next=3,L.a.toBlob(n);case 3:a=e.sent,Y()(a,"undefined.png","image/png");case 5:case"end":return e.stop()}}),e)})))()},clearPaint:function(){for(var t=0;t<this.pixelData.length;t+=1)for(var e=0;e<this.pixelData.length;e+=1)this.pixelData[t][e].bgColor=""}}},et=tt,nt=(n("093a"),Object(c["a"])(et,K,U,!1,null,"581eb6d5",null)),at=nt.exports,st={components:{Nav:B,Canvas:at}},rt=st,it=(n("2221"),Object(c["a"])(rt,M,E,!1,null,null,null)),ot=it.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-container"},[n("header",[n("Nav")],1),n("div",{staticClass:"contents-container"},[n("Canvas",{staticClass:"canvas-container",attrs:{"multi-mode":t.multiMode}}),n("Chat")],1)])},lt=[],ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat nes-container is-rounded"},[n("div",{ref:"messageContainer",staticClass:"chat__message"},t._l(t.messages,(function(e,a){return n("ul",{key:a,staticClass:"chat__message__list"},[t.isOtherUser(e.id)?n("li",{staticClass:"chat__message__list__content",class:{otherUser:t.isOtherUser(e.id)}},[t._v(" anonymous: "+t._s(e.msg)+" ")]):n("li",{staticClass:"chat__message__list__content"},[t._v(" "+t._s(e.msg)+" ")])])})),0),n("div",{staticClass:"nes-field chat__input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"chatInput",staticClass:"nes-input",attrs:{type:"text"},domProps:{value:t.message},on:{keypress:t.sendMsg,input:function(e){e.target.composing||(t.message=e.target.value)}}})])])},ft=[],pt=G()("http://localhost:4000/multi-game"),mt={data:function(){return{message:"",messages:[]}},created:function(){this.receiveMsg()},updated:function(){this.scrollToBottom()},methods:{sendMsg:function(t){"Enter"==t.code&&(this.messages.push({msg:this.message,id:0}),pt.emit("message",{msg:this.message,id:1}),this.initMsg())},receiveMsg:function(){var t=this;pt.on("newMessage",(function(e){t.messages.push(e)}))},initMsg:function(){this.$refs.chatInput.value="",this.message=""},isOtherUser:function(t){return 1==t},scrollToBottom:function(){var t=this.$refs.messageContainer.scrollTop+this.$refs.messageContainer.clientHeight==this.$refs.messageContainer.scrollHeight;t||(this.$refs.messageContainer.scrollTop=this.$refs.messageContainer.scrollHeight)}}},dt=mt,vt=(n("2f3f"),Object(c["a"])(dt,ut,ft,!1,null,"202f297a",null)),ht=vt.exports,gt={components:{Nav:B,Canvas:at,Chat:ht},data:function(){return{multiMode:!0}}},_t=gt,bt=(n("80b2"),Object(c["a"])(_t,ct,lt,!1,null,null,null)),Ct=bt.exports;a["a"].use(f["a"]);var wt=[{path:"/",name:"home",component:g},{path:"/lobby",name:"lobby",component:$},{path:"/game",name:"game",component:ot},{path:"/multi-game",name:"multiGame",component:Ct}],yt=new f["a"]({mode:"history",base:"/",routes:wt}),xt=yt,Dt=n("2f62");a["a"].use(Dt["a"]);var Pt=new Dt["a"].Store({state:{},mutations:{},actions:{},modules:{}});a["a"].config.productionTip=!1,new a["a"]({router:xt,store:Pt,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),s=n.n(a);s.a},"7b46":function(t,e,n){},"80b2":function(t,e,n){"use strict";var a=n("d4a1"),s=n.n(a);s.a},"8c08":function(t,e,n){},9454:function(t,e,n){},"9c0c":function(t,e,n){},aed9:function(t,e,n){"use strict";var a=n("9454"),s=n.n(a);s.a},bda9:function(t,e,n){},d4a1:function(t,e,n){},eb3c:function(t,e,n){"use strict";var a=n("ecfd"),s=n.n(a);s.a},ecfd:function(t,e,n){}});
//# sourceMappingURL=app.82a4bbbb.js.map